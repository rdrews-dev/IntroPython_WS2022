
\section{Functions and loops}

\subsection{Linear regression}
Load the Keeling curve from \ref{sec:loops}. Fit a first and second order polynomial to the dataset. We understand that this type of fitting must have been solved by somebody else already and therefore use functions to do the task, specifically numpy's polyfit and polyval combination. Visualize the seasonality by subtracting the fit from the observations. Which models (i.e. first or second order polynomial) fits better and what does that mean?


\subsection{Writing your own functions}
Calculating the time (or spatial) derivative of a 1D dataset is something that may occur quite frequently. Occuring tasks are best written in functions for many reasons (name at least two). Write a function called \textit{ForwardDifferencingXY} that takes a 2 x n array as input where the independent variable (e.g., time) is stored in the first column, and the dependent variable (e.g., CO$_2$) in the second column. The output should also be a 2 x n array with the independent variable in the first column and the derivative of the dependent variable in the second colum. 


Here you should do this for the Keeling curve from \ref{sec:loops} and for the Gausspeak from \ref{sec:mathfunc}.
\begin{itemize}
    \item Use your function \textit{ForwardDifferencingXY} to calculate rates of change for the Keeling curve \ref{sec:loops}, the sinsoid and the 1D Gauss Peak \ref{sec:mathfunc}
    \item Make your function more robust so that it catches wrong use interactions (e.g., passing on a n x 2 array instead of 2 x n array)
    \item Make your user function more user friendly by providing and optional figure with sub-panels showing the original data on top, and the time derivative at the bottom. 
    \item Add noise to your input data using numpys randn function, what does that do to your derivatives. Why?
\end{itemize}
